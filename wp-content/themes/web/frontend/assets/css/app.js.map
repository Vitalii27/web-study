{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../js/app.js","sourcesContent":["// var jq = jQuery;\r\n\r\nvar app = (function() {\r\n\r\n    var _onLoad = function() {\r\n\r\n        var vanillaModal = new VanillaModal.default();\r\n\r\n        document.getElementById('menu-control').addEventListener('click', function(e) {\r\n            _menuToggle(this);\r\n        });\r\n\r\n        if (document.querySelector('input[type=\"tel\"]')) {\r\n            var telInput = document.querySelectorAll('input[type=\"tel\"]');\r\n            for (var i = 0; i < telInput.length; i++) {\r\n                Inputmask({ \"mask\": \"+7(999) 999-99-99\" }).mask(telInput[i]);\r\n            }\r\n        }\r\n\r\n\r\n        // табы faq\r\n        if (document.querySelector('#js-tabs-faq')) {\r\n            _tabs(document.querySelector('#js-tabs-faq'), 0);\r\n        }\r\n    }\r\n\r\n\r\n    // if ( document.querySelector('#js-portf-tabs') ) {\r\n    //     _tabs( document.querySelector('#js-portf-tabs'), 0 );\r\n    // }\r\n\r\n\r\n    // слайдер отзывов\r\n    if (document.querySelector('#js-tns-testimonial')) {\r\n        var tnsTestimonialsContainer = document.querySelector('#js-tns-testimonial');\r\n        var tnsTestimonials = tns({\r\n            container: tnsTestimonialsContainer.querySelector('.slider-container'),\r\n            items: 1,\r\n            controlsContainer: tnsTestimonialsContainer.querySelector('.slider-controls'),\r\n            navContainer: tnsTestimonialsContainer.querySelector('.slider-nav')\r\n        });\r\n    }\r\n\r\n\r\n    // слайдер клиентов\r\n    if (document.querySelector('#js-tns-clients')) {\r\n        var tnsClientsContainer = document.querySelector('.b-clients');\r\n        var tnsClients = tns({\r\n            container: '#js-tns-clients',\r\n            items: 6,\r\n            controlsContainer: tnsClientsContainer.querySelector('.slider-controls'),\r\n            responsive: {\r\n                0: {\r\n                    items: 2\r\n                },\r\n                544: {\r\n                    items: 4\r\n                },\r\n                768: {\r\n                    items: 6\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    // галерея портфолио\r\n    if (document.querySelector('.portf-gallery')) {\r\n\r\n        baguetteBox.run('.portf-gallery__body');\r\n\r\n        var tnsPGalleryContainer = document.querySelector('.portf-gallery');\r\n        var tnsPGalleryBody = tnsPGalleryContainer.querySelector('.portf-gallery__body');\r\n\r\n        var tnsPGallery = tns({\r\n            container: tnsPGalleryContainer.querySelector('.portf-gallery-slider .inner'),\r\n            controlsContainer: tnsPGalleryContainer.querySelector('.portf-gallery-slider .controls'),\r\n            items: 3,\r\n            nav: 0,\r\n            gutter: 10,\r\n            controlsText: ['', ''],\r\n            loop: 0,\r\n            responsive: {\r\n                0: {\r\n                    items: 2\r\n                },\r\n                768: {\r\n                    items: 3\r\n                }\r\n            },\r\n            onInit: function(e) {\r\n\r\n                var container = e.container;\r\n                var slideIdx = e.index;\r\n                var slides = e.slideItems;\r\n                var slide = e.slideItems[slideIdx];\r\n\r\n                _portfSlider(container, slide, tnsPGalleryBody);\r\n\r\n                [].forEach.call(slides, function(elem) {\r\n\r\n                    elem.addEventListener('click', function(e) {\r\n                        _portfSlider(container, elem, tnsPGalleryBody);\r\n                    });\r\n\r\n                });\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // для валидации добавить атрибут data-validate\r\n    validate.init({\r\n        messageValueMissing: 'Это обязательное поле',\r\n        messageTooShort: 'Не менее {minLength} символов',\r\n        disableSubmit: true,\r\n\r\n        onSubmit: function(form, fields) {\r\n            _sendForm(form);\r\n        }\r\n    });\r\n\r\n    if (document.getElementById('map')) {\r\n        _createMap(document.getElementById('map'));\r\n    };\r\n\r\n\r\n    var _menuToggle = function(elem) {\r\n        elem.classList.toggle('active');\r\n        document.getElementById('main-menu').classList.toggle('active');\r\n    };\r\n\r\n\r\n    var _portfSlider = function(container, elem, galleryBody) {\r\n\r\n        var tabs = document.querySelectorAll('.portf-tabs-desc');\r\n\r\n        if (container.querySelector('.active')) {\r\n            container.querySelector('.active').classList.remove('active');\r\n        }\r\n\r\n        elem.classList.add('active');\r\n\r\n        var index = container.querySelector('.active .image').getAttribute('data-index');\r\n\r\n        if (galleryBody.querySelector('.active')) {\r\n            galleryBody.querySelector('.active').classList.remove('active');\r\n            document.querySelector('.portf-tabs-desc.active').classList.remove('active');\r\n        }\r\n\r\n        galleryBody.querySelectorAll('.image')[index].classList.add('active');\r\n        tabs[index].classList.add('active');\r\n\r\n        _tabs(tabs[index], 0);\r\n    };\r\n\r\n\r\n    var _sendForm = function(form) {\r\n        var fd = new FormData(form),\r\n            url = myajax.url;\r\n\r\n        fd.append('action', 'mail_handler');\r\n        fd.append('nonce_code', myajax.nonce);\r\n\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function() {\r\n            if (this.readyState == 4 && this.status == 200) {\r\n                // Typical action to be performed when the document is ready:\r\n                var res = JSON.parse(xhttp.responseText);\r\n                if (res.success) {\r\n                    form.reset();\r\n                    form.classList.add('success');\r\n                    setTimeout(function() {\r\n                        form.classList.remove('success');\r\n                    }, 3000);\r\n                }\r\n            }\r\n        };\r\n        xhttp.open(\"POST\", url, true);\r\n        xhttp.send(fd);\r\n    };\r\n\r\n\r\n    // Табы\r\n    var _tabs = function(container, activeItem) {\r\n        // список - атрибут [data-tab-control='']\r\n        // сами табы - атрибут [data-tab='']\r\n\r\n        var tabContainer = container;\r\n        var tabControls = container.querySelectorAll('[data-tab-control]');\r\n        var tabs = container.querySelectorAll('[data-tab]');\r\n\r\n        tabControls[activeItem].classList.add('active');\r\n        var activeTab = tabControls[activeItem].getAttribute('data-tab-control');\r\n\r\n        tabContainer.querySelector('[data-tab=\"' + activeTab + '\"]').classList.add('active');\r\n\r\n        [].forEach.call(tabControls, function(tabControl) {\r\n\r\n            tabControl.addEventListener('click', function() {\r\n                var tabName = this.getAttribute('data-tab-control');\r\n\r\n                container.querySelector('[data-tab-control].active').classList.remove('active');\r\n                this.classList.add('active');\r\n\r\n                if (tabName != '') {\r\n                    [].forEach.call(tabs, function(tab) {\r\n                        tab.classList.remove('active');\r\n                    });\r\n                    container.querySelector('[data-tab=\"' + tabName + '\"]').classList.add('active');\r\n\r\n                }\r\n            });\r\n\r\n        });\r\n    };\r\n\r\n\r\n    var _createMap = function(elem) {\r\n        // Яндекс Карта\r\n        // http://dimik.github.io/ymaps/examples/location-tool/\r\n        // <script src=\"https://api-maps.yandex.ru/2.1/?lang=ru_RU\" type=\"text/javascript\"></script>\r\n        // #elem(data-center=\"\" data-mark=\"\" data-address=\"\" data-zoom=\"\")\r\n\r\n        var mapCenter = elem.getAttribute('data-center'),\r\n            mapMark = elem.getAttribute('data-mark'),\r\n            mapAddress = elem.getAttribute('data-address'),\r\n            mapZoom = elem.getAttribute('data-zoom'),\r\n\r\n            mapCenterCoords = mapCenter.split(','),\r\n            mapMarkCoords = mapMark.split(','),\r\n\r\n            myMap,\r\n            myPlacemark;\r\n\r\n        ymaps.ready(init);\r\n\r\n        function init() {\r\n            myMap = new ymaps.Map(elem, {\r\n                center: mapCenterCoords,\r\n                zoom: mapZoom,\r\n                // controls: ['geolocationControl', 'routeButtonControl', 'typeSelector', 'fullscreenControl', 'zoomControl']\r\n                controls: ['zoomControl', 'fullscreenControl']\r\n            });\r\n\r\n            myMap.behaviors.disable('scrollZoom');\r\n\r\n            myPlacemark = new ymaps.Placemark(mapMarkCoords, { hintContent: mapAddress });\r\n\r\n            myMap.geoObjects.add(myPlacemark);\r\n        }\r\n    };\r\n\r\n\r\n    var init = function() {\r\n        svg4everybody();\r\n\r\n        document.addEventListener('DOMContentLoaded', _onLoad);\r\n    };\r\n\r\n    return {\r\n        init: init\r\n    };\r\n})();\r\napp.init();"]}